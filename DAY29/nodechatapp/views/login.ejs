<style></style>

<!-- 우측 고유 콘텐츠 영역  -->
<div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 col-12">
  <div class="login-wrapper">
    <form action="/login" method="post" id="loginForm">
      <div class="login-screen">
        <div class="login-body">
          <a href="index.html" class="login-logo">
            <img src="img/logo.svg" alt="Quick Chat" />
          </a>
          <h6>Welcome back,<br />Please login to your account.</h6>
          <div class="field-wrapper">
            <input type="email" name="email" id="email" autofocus />
            <div class="field-placeholder">Email ID</div>
          </div>
          <div class="field-wrapper mb-3">
            <input type="password" name="password" id="password" />
            <div class="field-placeholder">Password</div>
          </div>
          <div class="actions">
            <a href="forgot-password.html">Forgot password?</a>
            <button type="submit" class="btn btn-primary">Login</button>
          </div>
        </div>
        <div class="login-footer">
          <span class="additional-link"
            >No Account?
            <a href="signup.html" class="btn btn-secondary">Sign Up</a></span
          >
        </div>
      </div>
    </form>
  </div>
</div>

<script>
  const loginForm = $('#loginForm');

  const handleForm = e => {
    const email = $('#email');
    const password = $('#password');

    if (!email.val()) {
      alert('메일주소를 입력해주세요.');
      email.focus();
      return false;
    }

    if (!password.val()) {
      alert('비밀번호를 입력해주세요.');
      password.focus();
      return false;
    }

    const member = {
      email: email.val(),
      password: password.val(),
    };

    $.ajax({
      url: '/api/member/login',
      type: 'POST',
      data: member,
      success: result => {
        console.log('회원로그인 결과값 확인:', result);

        switch (result.code) {
          case 200:
            localStorage.setItem('userauthtoken', result.data);
            location.href = '/chat';
            break;
          case 400:
            result.msg === 'NotExistEmail'
              ? alert('동일한 메일주소가 존재하지 않습니다.')
              : alert('암호가 존재하지 않습니다.');
            break;

          default:
            alert('로그인을 실패헀습니다.');
        }
      },
    });

    return false;
  };

  loginForm.submit(handleForm);
</script>
